(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c50a2e9"],{"1faa":function(t,o,e){},"9e2c":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"content mt-2"},[e("b-container",[e("h5",[t._v("My Books")]),e("b-row",[e("b-col",[e("button",{staticClass:"btn btn-success mt-3",on:{click:function(o){return t.showModal()}}},[t._v(" Upload Book ")]),t.products.length>0?e("div",[e("div",{staticClass:"card mt-4"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Category")]),e("th",{attrs:{scope:"col"}},[t._v("Image")]),e("th",{attrs:{scope:"col"}},[t._v("Name")]),e("th",{attrs:{scope:"col"}},[t._v("Slug")]),e("th",{attrs:{scope:"col"}},[t._v("Price")]),e("th",{attrs:{scope:"col"}},[t._v("Quantity")]),e("th",{attrs:{scope:"col"}},[t._v("Unit")]),e("th",{attrs:{scope:"col"}},[t._v("Actions")])])]),e("tbody",t._l(t.products,(function(o){return e("tr",{key:o.id},[e("td",t._l(t.categories,(function(s){return e("div",{key:s.id},[o.category_id===s.id?e("span",[t._v(" "+t._s(s.name)+" ")]):t._e()])})),0),e("td",t._l(o.image,(function(t){return e("img",{key:t,staticClass:"img-thumbnail product-image-inside-table",attrs:{src:t,alt:o.name}})})),0),e("td",[t._v(t._s(o.name))]),e("td",[t._v(t._s(o.slug))]),e("td",[t._v("Rs. "+t._s(o.price))]),e("td",[t._v(t._s(o.quantity))]),e("td",t._l(t.units,(function(s){return e("div",{key:s.id},[o.unit_id===s.id?e("span",[t._v(" "+t._s(s.short_name)+" ")]):t._e()])})),0),e("td",[e("button",{staticClass:"btn btn-warning m-2",on:{click:function(e){return t.loadBookDetails(o.slug)}}},[e("b-icon",{attrs:{icon:"gear","font-scale":"1.2"}})],1),e("button",{staticClass:"btn btn-danger m-2"},[e("b-icon",{attrs:{icon:"x","font-scale":"1.2"}})],1)])])})),0)])])]):e("div",[e("p",{staticClass:"mt-3"},[t._v("You have no Books. Please add one to start earning.")])]),e("b-modal",{staticStyle:{width:"20em"},attrs:{id:"bv-modal-addbook","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v(t._s(t.book_title))])]},proxy:!0}])},[e("div",{staticClass:"d-block text-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Category")])]),e("div",{staticClass:"col-md-7"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.book.category,expression:"book.category"}],staticClass:"form-control",on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.book,"category",o.target.multiple?e:e[0])}}},t._l(t.categories,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.name)+" ")])})),0),t.errors.category?e("span",{class:["errorText"]},[t._v(t._s(t.errors.category[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Name")])]),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.name,expression:"book.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.name},on:{input:function(o){o.target.composing||t.$set(t.book,"name",o.target.value)}}}),t.errors.name?e("span",{class:["errorText"]},[t._v(t._s(t.errors.name[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Price")])]),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.price,expression:"book.price"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.price},on:{input:function(o){o.target.composing||t.$set(t.book,"price",o.target.value)}}}),t.errors.price?e("span",{class:["errorText"]},[t._v(t._s(t.errors.price[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Quantity")])]),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.quantity,expression:"book.quantity"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.quantity},on:{input:function(o){o.target.composing||t.$set(t.book,"quantity",o.target.value)}}}),t.errors.quantity?e("span",{class:["errorText"]},[t._v(t._s(t.errors.quantity[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Unit")])]),e("div",{staticClass:"col-md-7"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.book.unit,expression:"book.unit"}],staticClass:"form-control",on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.book,"unit",o.target.multiple?e:e[0])}}},t._l(t.units,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.short_name)+" ")])})),0),t.errors.unit?e("span",{class:["errorText"]},[t._v(t._s(t.errors.unit[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Discount")])]),e("div",{staticClass:"col-md-7"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.discount,expression:"book.discount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.discount},on:{input:function(o){o.target.composing||t.$set(t.book,"discount",o.target.value)}}}),t.errors.discount?e("span",{class:["errorText"]},[t._v(t._s(t.errors.discount[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Description")])]),e("div",{staticClass:"col-md-7"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.description,expression:"book.description"}],staticClass:"form-control",domProps:{value:t.book.description},on:{input:function(o){o.target.composing||t.$set(t.book,"description",o.target.value)}}}),t.errors.description?e("span",{class:["errorText"]},[t._v(t._s(t.errors.description[0]))]):t._e()])]),e("div",{staticClass:"row mt-1"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("More Info")])]),e("div",{staticClass:"col-md-7"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.more_info,expression:"book.more_info"}],staticClass:"form-control",domProps:{value:t.book.more_info},on:{input:function(o){o.target.composing||t.$set(t.book,"more_info",o.target.value)}}}),t.errors.more_info?e("span",{class:["errorText"]},[t._v(t._s(t.errors.more_info[0]))]):t._e()])]),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-4"},[e("label",[t._v("Images")])]),e("div",{staticClass:"col-md-8"},[e("input",{ref:"files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(o){return t.handleFileUploads()}}}),t.errors.file?e("span",{class:["errorText"]},[t._v(t._s(t.errors.file[0]))]):t._e()])])]),"edit"===t.book_action?e("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:t.editBook}},[t._v("Edit Book")]):t._e(),"add"===t.book_action?e("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:t.uploadBook}},[t._v("Add Book")]):t._e()],1)],1)],1)],1)],1)},a=[];e("a4d3"),e("e01a"),e("b0c0"),e("fb6a"),e("dca8");function i(t,o){return o||(o=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(o)}}))}function r(){var t=i([""]);return r=function(){return t},t}var n={name:"MyBooks",components:{},data:function(){return{products:[],book:{category:"",name:"",price:"",discount:"",more_info:"",description:"",unit:"",quantity:""},book_title:"Upload Book",book_action:"add",errors:[],categories:{},units:{},uploadedFiles:[]}},created:function(){this.loadMyBooks(),this.loadCategories(),this.loadUnits()},computed:{},methods:{clearBook:function(){this.book.category="",this.book.name="",this.book.price="",this.book.discount="",this.book.more_info="",this.book.description="",this.book.unit="",this.book.quantity="",this.book.book_id=""},showModal:function(){this.clearBook(),this.$bvModal.show("bv-modal-addbook")},loadMyBooks:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/loadMyBooks").then((function(o){t.products=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},loadBookDetails:function(t){var o=this;this.$Progress.start(),this.book_action="edit",this.book_title="Change Book Information","edit"===this.book_action&&(this.clearBook(),this.$http.get("https://eshop.test/api/productDFS/"+t).then((function(t){var e=t.data.data[0];o.book.category=e.category_id,o.book.name=e.name,o.book.price=e.price,o.book.discount=e.discount,o.book.more_info=e.more_info,o.book.description=e.description,o.book.unit=e.unit_id,o.book.quantity=e.quantity,o.book.id=e.id,o.$bvModal.show("bv-modal-addbook"),o.$Progress.finish()})).catch((function(t){o.clearBook(),o.$toast.error(t.response.data.message,{timeout:4e3}),o.$Progress.fail()})))},handleFileUploads:function(){this.uploadedFiles=this.$refs.files.files,console.log(this.uploadedFiles)},loadCategories:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/categories").then((function(o){t.categories=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},loadUnits:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/units").then((function(o){t.units=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},editBook:function(){var t=this;this.$Progress.start(),this.book_action="Edit Book",this.book_action="edit";var o=new FormData;o.append("uploadedFiles",this.uploadedFiles);for(var e=0;e<this.uploadedFiles.length;e++){var s=this.uploadedFiles[e];o.append("files["+e+"]",s)}o.append("category",this.book.category),o.append("unit",this.book.unit),o.append("name",this.book.name),o.append("quantity",this.book.quantity),o.append("price",this.book.discount),o.append("discount",this.book.discount),o.append("description",this.book.description),o.append("more_info",this.book.more_info),o.append("book_id",this.book.id),this.$http.post("https://eshop.test/api/editBook",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){t.$toast.success(o.data.msg,{timeout:8e3}),t.clearBook(),t.loadMyBooks(),t.$bvModal.hide("bv-modal-addbook"),t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.errors=o.response.data.errors,""(r()),t.clearBook(),t.$Progress.fail()}))},uploadBook:function(){var t=this;this.$Progress.start(),this.book_action="add",this.book_title="Upload Book",this.clearBook();var o=new FormData;o.append("uploadedFiles",this.uploadedFiles);for(var e=0;e<this.uploadedFiles.length;e++){var s=this.uploadedFiles[e];o.append("files["+e+"]",s)}o.append("category",this.book.category),o.append("unit",this.book.unit),o.append("name",this.book.name),o.append("quantity",this.book.quantity),o.append("price",this.book.discount),o.append("discount",this.book.discount),o.append("description",this.book.description),o.append("more_info",this.book.more_info),this.$http.post("https://eshop.test/api/uploadBook",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){t.$toast.success(o.data.msg,{timeout:8e3}),console.log(o),t.$bvModal.hide("bv-modal-addbook"),t.clearBook(),t.loadMyBooks(),t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.errors=o.response.data.errors,t.clearBook(),t.$Progress.fail()}))}}},c=n,d=(e("dfc4"),e("2877")),l=Object(d["a"])(c,s,a,!1,null,"077d23e4",null);o["default"]=l.exports},bb2f:function(t,o,e){var s=e("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},dca8:function(t,o,e){var s=e("23e7"),a=e("bb2f"),i=e("d039"),r=e("861d"),n=e("f183").onFreeze,c=Object.freeze,d=i((function(){c(1)}));s({target:"Object",stat:!0,forced:d,sham:!a},{freeze:function(t){return c&&r(t)?c(n(t)):t}})},dfc4:function(t,o,e){"use strict";var s=e("1faa"),a=e.n(s);a.a},e01a:function(t,o,e){"use strict";var s=e("23e7"),a=e("83ab"),i=e("da84"),r=e("5135"),n=e("861d"),c=e("9bf2").f,d=e("e893"),l=i.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),o=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(u[o]=!0),o};d(p,l);var m=p.prototype=l.prototype;m.constructor=p;var v=m.toString,f="Symbol(test)"==String(l("test")),b=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,o=v.call(t);if(r(u,t))return"";var e=f?o.slice(7,-1):o.replace(b,"$1");return""===e?void 0:e}}),s({global:!0,forced:!0},{Symbol:p})}},f183:function(t,o,e){var s=e("d012"),a=e("861d"),i=e("5135"),r=e("9bf2").f,n=e("90e3"),c=e("bb2f"),d=n("meta"),l=0,u=Object.isExtensible||function(){return!0},p=function(t){r(t,d,{value:{objectID:"O"+ ++l,weakData:{}}})},m=function(t,o){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,d)){if(!u(t))return"F";if(!o)return"E";p(t)}return t[d].objectID},v=function(t,o){if(!i(t,d)){if(!u(t))return!0;if(!o)return!1;p(t)}return t[d].weakData},f=function(t){return c&&b.REQUIRED&&u(t)&&!i(t,d)&&p(t),t},b=t.exports={REQUIRED:!1,fastKey:m,getWeakData:v,onFreeze:f};s[d]=!0},fb6a:function(t,o,e){"use strict";var s=e("23e7"),a=e("861d"),i=e("e8b5"),r=e("23cb"),n=e("50c4"),c=e("fc6a"),d=e("8418"),l=e("b622"),u=e("1dde"),p=e("ae40"),m=u("slice"),v=p("slice",{ACCESSORS:!0,0:0,1:2}),f=l("species"),b=[].slice,h=Math.max;s({target:"Array",proto:!0,forced:!m||!v},{slice:function(t,o){var e,s,l,u=c(this),p=n(u.length),m=r(t,p),v=r(void 0===o?p:o,p);if(i(u)&&(e=u.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)?a(e)&&(e=e[f],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return b.call(u,m,v);for(s=new(void 0===e?Array:e)(h(v-m,0)),l=0;m<v;m++,l++)m in u&&d(s,l,u[m]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-3c50a2e9.048d5801.js.map
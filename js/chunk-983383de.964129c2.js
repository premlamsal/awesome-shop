(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-983383de"],{"9e2c":function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"content mt-2"},[s("b-container",[s("h5",[t._v("My Books")]),s("b-row",[s("b-col",[s("button",{staticClass:"btn btn-success mt-3",on:{click:function(o){return t.showModal()}}},[t._v(" Upload Book ")]),t.products.length>0?s("div",[s("div",{staticClass:"card mt-4"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Category")]),s("th",{attrs:{scope:"col"}},[t._v("Image")]),s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Slug")]),s("th",{attrs:{scope:"col"}},[t._v("Price")]),s("th",{attrs:{scope:"col"}},[t._v("Quantity")]),s("th",{attrs:{scope:"col"}},[t._v("Unit")]),s("th",{attrs:{scope:"col"}},[t._v("Actions")])])]),s("tbody",t._l(t.products,(function(o){return s("tr",{key:o.id},[s("td",t._l(t.categories,(function(e){return s("div",{key:e.id},[o.category_id===e.id?s("span",[t._v(" "+t._s(e.name)+" ")]):t._e()])})),0),s("td",t._l(o.image,(function(t){return s("img",{key:t,staticClass:"img-thumbnail product-image-inside-table",attrs:{src:t,alt:o.name}})})),0),s("td",[t._v(t._s(o.name))]),s("td",[t._v(t._s(o.slug))]),s("td",[t._v("Rs. "+t._s(o.price))]),s("td",[t._v(t._s(o.quantity))]),s("td",t._l(t.units,(function(e){return s("div",{key:e.id},[o.unit_id===e.id?s("span",[t._v(" "+t._s(e.short_name)+" ")]):t._e()])})),0),s("td",[s("button",{staticClass:"btn btn-warning m-2",on:{click:function(s){return t.loadBookDetails(o.slug)}}},[s("b-icon",{attrs:{icon:"gear","font-scale":"1.2"}})],1),s("button",{staticClass:"btn btn-danger m-2"},[s("b-icon",{attrs:{icon:"x","font-scale":"1.2"}})],1)])])})),0)])])]):s("div",[s("p",{staticClass:"mt-3"},[t._v(" You have no Books. Please add one to start earning. ")])]),s("b-modal",{staticStyle:{width:"20em"},attrs:{id:"bv-modal-addbook","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[s("span",{staticClass:"text-primary"},[t._v(t._s(t.book_title))])]},proxy:!0}])},[s("div",{staticClass:"d-block text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Category")])]),s("div",{staticClass:"col-md-7"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.book.category,expression:"book.category"}],staticClass:"form-control",on:{change:function(o){var s=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.book,"category",o.target.multiple?s:s[0])}}},t._l(t.categories,(function(o){return s("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.name)+" ")])})),0),t.errors.category?s("span",{class:["errorText"]},[t._v(t._s(t.errors.category[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Name")])]),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.name,expression:"book.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.name},on:{input:function(o){o.target.composing||t.$set(t.book,"name",o.target.value)}}}),t.errors.name?s("span",{class:["errorText"]},[t._v(t._s(t.errors.name[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Price")])]),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.price,expression:"book.price"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.price},on:{input:function(o){o.target.composing||t.$set(t.book,"price",o.target.value)}}}),t.errors.price?s("span",{class:["errorText"]},[t._v(t._s(t.errors.price[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Quantity")])]),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.quantity,expression:"book.quantity"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.quantity},on:{input:function(o){o.target.composing||t.$set(t.book,"quantity",o.target.value)}}}),t.errors.quantity?s("span",{class:["errorText"]},[t._v(t._s(t.errors.quantity[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Unit")])]),s("div",{staticClass:"col-md-7"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.book.unit,expression:"book.unit"}],staticClass:"form-control",on:{change:function(o){var s=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.book,"unit",o.target.multiple?s:s[0])}}},t._l(t.units,(function(o){return s("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.short_name)+" ")])})),0),t.errors.unit?s("span",{class:["errorText"]},[t._v(t._s(t.errors.unit[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Discount")])]),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.discount,expression:"book.discount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.discount},on:{input:function(o){o.target.composing||t.$set(t.book,"discount",o.target.value)}}}),t.errors.discount?s("span",{class:["errorText"]},[t._v(t._s(t.errors.discount[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Location")])]),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.location,expression:"book.location"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.location},on:{input:function(o){o.target.composing||t.$set(t.book,"location",o.target.value)}}}),t.errors.location?s("span",{class:["errorText"]},[t._v(t._s(t.errors.location[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Description")])]),s("div",{staticClass:"col-md-7"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.description,expression:"book.description"}],staticClass:"form-control",domProps:{value:t.book.description},on:{input:function(o){o.target.composing||t.$set(t.book,"description",o.target.value)}}}),t.errors.description?s("span",{class:["errorText"]},[t._v(t._s(t.errors.description[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Hightlights")])]),s("div",{staticClass:"col-md-7"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.hightlights,expression:"book.hightlights"}],staticClass:"form-control",domProps:{value:t.book.hightlights},on:{input:function(o){o.target.composing||t.$set(t.book,"hightlights",o.target.value)}}}),t.errors.hightlights?s("span",{class:["errorText"]},[t._v(t._s(t.errors.hightlights[0]))]):t._e()])]),s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("More Info")])]),s("div",{staticClass:"col-md-7"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.more_info,expression:"book.more_info"}],staticClass:"form-control",domProps:{value:t.book.more_info},on:{input:function(o){o.target.composing||t.$set(t.book,"more_info",o.target.value)}}}),t.errors.more_info?s("span",{class:["errorText"]},[t._v(t._s(t.errors.more_info[0]))]):t._e()])]),s("div",{staticClass:"row mt-2"},[s("div",{staticClass:"col-md-4"},[s("label",[t._v("Images")])]),s("div",{staticClass:"col-md-8"},[s("input",{ref:"files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(o){return t.handleFileUploads()}}}),t.errors.file?s("span",{class:["errorText"]},[t._v(t._s(t.errors.file[0]))]):t._e()])])]),"edit"===t.book_action?s("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:t.editBook}},[t._v("Edit Book")]):t._e(),"add"===t.book_action?s("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:t.uploadBook}},[t._v("Add Book")]):t._e()],1)],1)],1)],1)],1)},i=[],a=(s("a4d3"),s("e01a"),s("b0c0"),{name:"MyBooks",components:{},data:function(){return{products:[],book:{category:"",name:"",price:"",discount:"",more_info:"",description:"",unit:"",quantity:"",hightlights:"",location:""},book_title:"Upload Book",book_action:"add",errors:[],categories:{},units:{},uploadedFiles:[]}},created:function(){this.loadMyBooks(),this.loadCategories(),this.loadUnits()},computed:{},methods:{clearBook:function(){this.book.category="",this.book.name="",this.book.price="",this.book.discount="",this.book.more_info="",this.book.description="",this.book.unit="",this.book.quantity="",this.book.book_id="",this.book.hightlights="",this.book.location=""},showModal:function(){this.clearBook(),this.book_action="add",this.book_title="Upload a Book",this.$bvModal.show("bv-modal-addbook")},loadMyBooks:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/frontend/loadMyBooks").then((function(o){t.products=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},loadBookDetails:function(t){var o=this;this.$Progress.start(),this.book_action="edit",this.book_title="Change Book Information","edit"===this.book_action&&(this.clearBook(),this.$http.get("https://eshop.test/api/frontend/productDFS/"+t).then((function(t){var s=t.data.data[0];o.book.category=s.category_id,o.book.name=s.name,o.book.price=s.price,o.book.discount=s.discount,o.book.more_info=s.more_info,o.book.description=s.description,o.book.unit=s.unit_id,o.book.quantity=s.quantity,o.book.hightlights=s.hightlights,o.book.location=s.location,o.book.id=s.id,o.$bvModal.show("bv-modal-addbook"),o.$Progress.finish()})).catch((function(t){o.clearBook(),o.$toast.error(t.response.data.message,{timeout:4e3}),o.$Progress.fail()})))},handleFileUploads:function(){this.uploadedFiles=this.$refs.files.files,console.log(this.uploadedFiles)},loadCategories:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/frontend/categories").then((function(o){t.categories=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},loadUnits:function(){var t=this;this.$Progress.start(),this.$http.get("https://eshop.test/api/frontend/units").then((function(o){t.units=o.data.data,t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.$Progress.fail()}))},editBook:function(){var t=this;this.$Progress.start(),this.book_action="Edit Book",this.book_action="edit";var o=new FormData;o.append("uploadedFiles",this.uploadedFiles);for(var s=0;s<this.uploadedFiles.length;s++){var e=this.uploadedFiles[s];o.append("files["+s+"]",e)}o.append("category",this.book.category),o.append("unit",this.book.unit),o.append("name",this.book.name),o.append("quantity",this.book.quantity),o.append("price",this.book.price),o.append("discount",this.book.discount),o.append("description",this.book.description),o.append("more_info",this.book.more_info),o.append("highlights",this.book.highlights),o.append("book_id",this.book.id),o.append("location",this.book.location),this.$http.post("https://eshop.test/api/frontend/editBook",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){t.$toast.success(o.data.msg,{timeout:8e3}),t.clearBook(),t.loadMyBooks(),t.$bvModal.hide("bv-modal-addbook"),t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.errors=o.response.data.errors,t.clearBook(),t.$Progress.fail()}))},uploadBook:function(){var t=this;this.$Progress.start(),this.book_action="add",this.book_title="Upload Book";var o=new FormData;o.append("uploadedFiles",this.uploadedFiles);for(var s=0;s<this.uploadedFiles.length;s++){var e=this.uploadedFiles[s];o.append("files["+s+"]",e)}o.append("category",this.book.category),o.append("unit",this.book.unit),o.append("name",this.book.name),o.append("quantity",this.book.quantity),o.append("price",this.book.price),o.append("discount",this.book.discount),o.append("description",this.book.description),o.append("more_info",this.book.more_info),o.append("highlights",this.book.highlights),o.append("location",this.book.location),this.$http.post("https://eshop.test/api/frontend/uploadBook",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){t.$toast.success(o.data.msg,{timeout:8e3}),console.log(o),t.$bvModal.hide("bv-modal-addbook"),t.clearBook(),t.loadMyBooks(),t.$Progress.finish()})).catch((function(o){t.$toast.error(o.response.data.message,{timeout:4e3}),t.errors=o.response.data.errors,t.clearBook(),t.$Progress.fail()}))}}}),r=a,n=(s("f478"),s("2877")),l=Object(n["a"])(r,e,i,!1,null,"1e8fd857",null);o["default"]=l.exports},df79:function(t,o,s){},e01a:function(t,o,s){"use strict";var e=s("23e7"),i=s("83ab"),a=s("da84"),r=s("5135"),n=s("861d"),l=s("9bf2").f,c=s("e893"),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var p={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),o=this instanceof u?new d(t):void 0===t?d():d(t);return""===t&&(p[o]=!0),o};c(u,d);var m=u.prototype=d.prototype;m.constructor=u;var h=m.toString,v="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,o=h.call(t);if(r(p,t))return"";var s=v?o.slice(7,-1):o.replace(b,"$1");return""===s?void 0:s}}),e({global:!0,forced:!0},{Symbol:u})}},f478:function(t,o,s){"use strict";var e=s("df79"),i=s.n(e);i.a}}]);
//# sourceMappingURL=chunk-983383de.964129c2.js.map